# GameAIDemo

ゲームAI技術のデモンストレーションプロジェクト。AIアルゴリズムを視覚的に体験できるインタラクティブなアプリケーションです。

## 概要

このプロジェクトは、ゲーム開発において重要なAI技術を学習・理解するために作られたデモアプリケーションです。現在、以下の3つのAIモードを実装しています：

1. **A*パスファインディング**（モード1）：障害物を避けながら目標に最短経路で到達するアルゴリズム
2. **ビヘイビアツリー**（モード2）：階層的な意思決定システムを使った複雑なAI行動モデル
3. **有限状態マシン（FSM）**（モード3）：状態遷移に基づく明確なAI行動管理システム

## システム要件

- .NET 8.0以上
- 対応OS：Windows, macOS, Linux
- グラフィックカード：基本的なグラフィック処理が可能なもの
- メモリ：最低2GB

## インストール方法

1. リポジトリをクローン：
```
git clone https://github.com/yourusername/GameAIDemo.git
```

2. プロジェクトディレクトリに移動：
```
cd GameAIDemo
```

3. アプリケーションをビルド：
```
dotnet build
```

4. アプリケーションを実行：
```
dotnet run
```

## 操作方法

### 基本操作
- **WASD / 矢印キー**：プレイヤーの移動
- **1**：A*パスファインディングモードに切り替え
- **2**：ビヘイビアツリーモードに切り替え 
- **3**：有限状態マシン（FSM）モードに切り替え
- **R**：AIエージェントの位置をリセット
- **H**：ヘルプ表示の切り替え
- **ESC**：ゲーム終了

### プレイヤー
青い円がプレイヤーです。WASDまたは矢印キーで自由に移動できます。障害物に接触するとプレイヤーは反発します。

### 障害物
灰色の四角形は障害物です。

## AIモードの詳細

### モード1：A*パスファインディング
**特徴**：
- 赤色のエージェント
- グリッド上のセルを利用した経路探索
- 障害物を最適に回避してプレイヤーを追跡
- グリッドベースの移動パターン

A*アルゴリズムはヒューリスティックを使った効率的な経路探索アルゴリズムです。エージェントはプレイヤーへの最短経路を常に計算し直し、障害物を回避しながら追跡します。

### モード2：ビヘイビアツリー
**特徴**：
- オレンジ色のエージェント
- 階層的な意思決定システム
- 複数の行動パターン（追跡、攻撃、逃走、うろつきなど）
- 体力に応じた行動変化
- 追跡時は障害物を無視して直進

ビヘイビアツリーは階層的な意思決定システムで、エージェントの状況に応じて異なる行動を実行します：
- **うろつき**：プレイヤーが検出範囲外の場合、ランダムに移動
- **追跡**：プレイヤーを発見すると直線的に追跡（障害物を無視）
- **攻撃**：プレイヤーに十分近づくと攻撃状態に移行

### モード3：有限状態マシン（FSM）
**特徴**：
- 状態に応じた色の変化（黄色：アイドル状態、緑色：巡回状態、赤色：追跡状態）
- 明確な視覚的な検知範囲表示（青色の円）
- 階層型とイベント駆動型を組み合わせたMode 3実装
- プレイヤーとの距離に基づく状態遷移

有限状態マシン（FSM）は、エージェントが明確に定義された状態間を遷移する単純かつ効果的なAI設計手法です：
- **アイドル状態**（黄色）：短時間停止後、自動的に巡回状態に移行
- **巡回状態**（緑色）：ランダムなポイント間を巡回
- **追跡状態**（赤色）：プレイヤーを検知すると直接追跡

エージェントはプレイヤーとの距離に基づいて状態を変化させます。内側の検知円（150ピクセル）内にプレイヤーが入ると追跡を開始し、外側の円（250ピクセル）より遠ざかると追跡を終了します。

## 技術的詳細

### プロジェクト構造
- **Entities/**: ゲーム内のエンティティ（プレイヤー、障害物など）
- **Utilities/**: ユーティリティクラス（グリッドマップなど）
- **AI/**: AIアルゴリズムの実装
  - **AStar/**: A*パスファインディングの実装
  - **BehaviorTree/**: ビヘイビアツリーの実装
  - **FSM/**: 有限状態マシンの実装

### 使用技術
- **MonoGame**: ゲームフレームワーク
- **C#**: プログラミング言語
- **.NET Core**: フレームワーク


## まとめ：ゲームAI技術

このプロジェクトでは、ゲーム開発における3つの代表的なAI技術を実装・可視化しました。各技術には長所と短所があり、用途に応じた適切な選択と組み合わせが重要です：

- **A***: パス探索に特化した効率的なアルゴリズム。最適な経路を見つけるが、複雑な行動パターンには不向き。
- **ビヘイビアツリー**: 複雑な行動パターンを階層的に表現できる柔軟なシステム。設計が複雑化する可能性がある。
- **FSM**: シンプルで理解しやすい状態管理。状態数が増えると管理が難しくなる場合がある。

実践的なゲーム開発では、これらの技術を状況に応じて適切に組み合わせることで、より洗練されたゲームAIを実現できます。このプロジェクトは、それらの技術を個別に理解し、統合的に活用するための基盤となります。

## 参考文献

### A*パスファインディング
1. https://blog.splout.co.jp/1550/
2. https://qiita.com/katsunobu1008/items/7552318e9e6899a6728a
3. https://himco.jp/2020/01/24/pathfinding%E7%B5%8C%E8%B7%AF%E6%8E%A2%E7%B4%A2-breadth-first-search%E5%B9%85%E5%84%AA%E5%85%88%E6%8E%A2%E7%B4%A2-%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0-p5-js-%E5%B0%8E%E5%85%A5/
### ビヘイビアツリー
1. https://historia.co.jp/archives/29055/
2. https://zenn.dev/adoring_onion/articles/behaviortree-samples
3. https://dev.epicgames.com/documentation/ja-jp/unreal-engine/behavior-tree-in-unreal-engine---overview

### 有限状態マシン（FSM）
1. https://deus-ex-machina-ism.com/?p=48835#google_vignette
2. https://joho-taisaku.com/finite-state-machine/
3. https://2dgames.jp/game-design-method/



